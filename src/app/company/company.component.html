<div style="margin-top:60px">
    <div class="container-xl">
        <div class="table-responsive">
            <div class="table-wrapper">
                <button type="button" class="btn btn-sm btn-link" data-toggle="modal" data-target="#addModal">Add
                    Company</button>
                <table datatable [dtOptions]="dtOptions" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Address </th>
                            <th>Email</th>
                            <th>GstNo<i class="fa fa-sort"></i></th>
                            <th>IsActive </th>
                            <th>Phone</th>
                            <th>Title </th>
                            <th>Website</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let company of companyResponse | paginate:config ;let indexOfelement=index;">
                            <td>{{indexOfelement+1}}</td>
                            <td>{{company.address}}</td>
                            <td>{{company.email}}</td>
                            <td>{{company.gstNo}}</td>
                            <td>{{company.isActive}}</td>
                            <td>{{company.Phone}}</td>
                            <td>{{company.title}}</td>
                            <td>{{company.Website}}</td>
                            <td>
                                <a href="#" data-toggle="modal" data-target="#editModal" (click)="modifyRecord(company)"
                                    class="edit" title="Edit"><i class="material-icons">&#xE254;</i></a>
                                <a href="#" data-toggle="modal" (click)="deleteRecord(company)" data-target="#viewModal"
                                    class="delete" title="Delete"><i class="material-icons">&#xE872;</i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--Container-->
    </div>
</div>


<!-- Edit Modal -->
<div class="modal fade" id="editModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" *ngIf="currentUpdateCompany!=undefined">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Editing {{currentUpdateCompany}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="currentUpdateCompany.address" name="address" id="address"
                                class="form-control" placeholder="address"
                                (change)="currentUpdateCompany.companyChangeRequired=true" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="currentUpdateCompany.email" name="email" id="email"
                                class="form-control" (change)="currentUpdateCompany.departmentChangeRequired=true" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" class="form-control" [(ngModel)]="currentUpdateCompany.driverId"
                                name="driverId" id="driverId" placeholder="driverId"
                                (change)="currentUpdateCompany.driverChangeRequired=true" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" class="form-control" [(ngModel)]="currentUpdateCompany.firstPickTime"
                                name="firstPickTime" id="firstPickTime" placeholder="firstPickTime"
                                (change)="currentUpdateCompany.tripInfoChangeRequired=true" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" class="form-control" [(ngModel)]="currentUpdateCompany.firstPickUpPoint"
                                name="firstPickUpPoint" id="firstPickUpPoint" placeholder="firstPickUpPoint"
                                (change)="currentUpdateCompany.tripInfoChangeRequired=true" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" class="form-control" [(ngModel)]="currentUpdateCompany.lastDroPoint"
                                name="lastDroPoint" id="lastDroPoint" placeholder="lastDroPoint"
                                (change)="currentUpdateCompany.tripInfoChangeRequired=true" />
                        </div>
                    </div>
                    <div class="form-row">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Phone</th>
                                    <th>Pickup Point</th>
                                    <th>Pickup TIme</th>
                                    <th>Drop Point</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let rider of currentUpdateCompany.riders;let count=index ">
                                    <td>{{count+1}}</td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.firstName"
                                            name="{{count+1}}firstName" id="{{count+1}}firstName"
                                            placeholder="firstName"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.lastName"
                                            name="{{count+1}}lastName" id="{{count+1}}lastName" placeholder="lastName"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.phone"
                                            name="{{count+1}}phone" id="{{count+1}}phone" placeholder="phone"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.pickPoint"
                                            name="{{count+1}}pickPoint" id="{{count+1}}pickPoint"
                                            placeholder="pickPoint"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.pickDateTime"
                                            name="{{count+1}}pickDateTime" id="{{count+1}}pickDateTime"
                                            placeholder="pickDateTime"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td><input type="text" class="form-control" [(ngModel)]="rider.dropPoint"
                                            name="{{count+1}}dropPoint" id="{{count+1}}dropPoint"
                                            placeholder="dropPoint"
                                            (change)="currentUpdateCompany.riderChangeRequired=true" /></td>
                                    <td>
                                        <a class="add" (click)="addNewUpdateRider()" title="Add Rider"><i
                                                class="material-icons">&#xE03B;</i></a>
                                        <a class="delete" (click)="deleteNewlyAddedRiderFromUpdate(rider)"
                                            title="Delete"><i class="material-icons">&#xE872;</i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="updateTripToDb()">Update Record</button>
            </div>
            <pre *ngIf="isDebugMode&& currentUpdateCompany!=undefined"> {{currentUpdateCompany | json}} </pre>
        </div>
    </div>
</div>

<!-- add modal -->
<div class="modal fade" id="addModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Edit</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" *ngIf="createCompany!=undefined">
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.address" name="address" class="form-control"
                                placeholder="Address">
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.email" name="email" class="form-control"
                                placeholder="email" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.gstNo" name="gstNo" class="form-control"
                                placeholder="GstNO" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.isActive" name="isActive" class="form-control"
                                placeholder="IsActive" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.phone" name="phone" class="form-control"
                                placeholder="Phone" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.title" name="title" class="form-control"
                                placeholder="Title" />
                        </div>
                        <div class="form-group col-md-2">
                            <input type="text" [(ngModel)]="createCompany.website" name="website" class="form-control"
                                placeholder="Website" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="createNewCompany()">Add Record</button>
            </div>
            <pre *ngIf="isDebugMode"> {{createCompany | json}} </pre>
        </div>
    </div>
</div>